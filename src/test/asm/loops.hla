((
	based on http://dada.perl.it/shootout/nestedloop.html
))

((	Morty:

	def loops (n--a) :x
		0
		x times x times x times x times x times x times
			1 add
		loop loop loop loop loop loop
	ret
))

0 jz.@start


((
loop:
	stor
	0
	vget.1 times.@]1 [1:
		1 add
	]1: loop.@[1 rsub.2
ret
))

((
loops: (28: 1904ms
	stor
	0
	vget.1 (n) 1 sub stor [1:
		vget.1 (n) 1 sub stor [2:
			vget.1 (n) 1 sub stor [3:
				vget.1 (n) 1 sub stor [4:
					vget.1 (n) 1 sub stor [5:
						vget.1 (n) 1 sub stor [6:
							1 add
						loop.@[6
					loop.@[5
				loop.@[4
			loop.@[3
		loop.@[2
	loop.@[1
ret
))

((
loops: (28: 1831ms
	stor
	0
	vget.1 (n) times [1:
		vget.1 (n) times [2:
			vget.1 (n) times [3:
				vget.1 (n) times [4:
					vget.1 (n) times [5:
						vget.1 (n) times [6:
							1 add
						loop.@[6
					loop.@[5
				loop.@[4
			loop.@[3
		loop.@[2
	loop.@[1
ret
))

((
loops: (28: 1880ms
	stor
	0
	vget.1 (n) times.@]1 [1:
		vget.1 (n) times.@]2 [2:
			vget.1 (n) times.@]3 [3:
				vget.1 (n) times.@]4 [4:
					vget.1 (n) times.@]5 [5:
						vget.1 (n) times.@]6 [6:
							1 add
						]6: loop.@[6 rsub.2
					]5: loop.@[5 rsub.2
				]4: loop.@[4 rsub.2
			]3: loop.@[3 rsub.2
		]2: loop.@[2 rsub.2
	]1: loop.@[1 rsub.2
ret
))

((
loops: (28: 1840ms
	stor
	0
	vget.1 (n) times.@]1 [1:
		vget.1 (n) times.@]2 [2:
			vget.1 (n) times.@]3 [3:
				vget.1 (n) times.@]4 [4:
					vget.1 (n) times.@]5 [5:
						vget.1 (n) times.@]6 [6:
							1 add
						]6: loop.@[6
					]5: loop.@[5
				]4: loop.@[4
			]3: loop.@[3
		]2: loop.@[2
	]1: loop.@[1
ret
))


loops: (28: 2000ms  frame=addr,incr,to,from; loop increments / 1351ms with addi 
	stor
	0 stor
	0
	vget.1 (n) times.@[
		vget.1 (n) times.@[
			vget.1 (n) times.@[
				vget.1 (n) times.@[
					vget.1 (n) times.@[
						vget.1 (n) times.@[
							1 add
							( rget.0 1 add vset.2 )
							( rget.0 2 mul 1 add vset.2 )
						loop.@]
					loop.@]
				loop.@]
			loop.@]
		loop.@]
	loop.@]
ret

((
loops: (28: 2455ms without addi, 1800ms with addi
	stor
	0 stor
	0
	vget.1 (n) 0 1 for.@[
		vget.1 (n) 0 1 for.@[
			vget.1 (n) 0 1 for.@[
				vget.1 (n) 0 1 for.@[
					vget.1 (n) 0 1 for.@[
						vget.1 (n) 0 1 for.@[
							( 1 add ( 1800 ms with addi )
							rget.0 1 add vset.2 ( 3232ms with addi )
							( rget.0 2 mul 1 add vset.2 ( 3812ms with muli addi )
						loop.@]
					loop.@]
				loop.@]
			loop.@]
		loop.@]
	loop.@]
ret
))

start:
	28 call.@loops vminfo


( 3000ms vs 3200ms -> times+mul vs for )